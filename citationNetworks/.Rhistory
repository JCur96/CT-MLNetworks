fullData$search
fullData$label
fullData$color
fullData$title
fullDataOdered <- fullData[order(fullData$search),]
colnames(edges)
edges <- edges[c("CitingID", "CitedID")]
nodes <- fullData[c("ID")] # slice of just ID and title
# currently this is an undirected shared reference network I think
# or at least it should be as those are the edges
#edges <- fullData[c("ID", "cited_by")]
titles <- fullData[c("ID", "title")]
authors <- fullData[c("ID", "author")]
journal <- fullData[c("ID", "source_title")]
year <- fullData[c("ID", "year")]
search <- fullData[c("ID", "search")]
label <- fullData[c("ID", "label")]
color <- fullData[c("ID", "color")]
references <- fullData[c("ID", "references")]
class(edges)
edges <- as.matrix(edges)
class(edges)
edges
net <- igraph::graph_from_edgelist(edges, directed = FALSE)
#net <- igraph::graph_from_data_frame(edges, directed = FALSE)
#plot(net)
net <- set_vertex_attr(net, "title", value = nodes)
#plot(net)
net <- set_vertex_attr(net, "author", value = authors)
net <- set_vertex_attr(net, "journal", value = journal)
net <- set_vertex_attr(net, "year", value = year)
net <- set_vertex_attr(net, "search", value = search)
layout <- layout.fruchterman.reingold(net)
plot(simplify(net),
layout=layout, vertex.size=2,
vertex.label=NA,
vertex.color= fullData$search,
edge.arrow.size=.2)
plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
vertex.color= fullData$search,
edge.arrow.size=.2)
coords = layout_(net, with_mds())
# coords = layout_(net, with_kk())
# png("../Results/Graphics/InitialPlot.png")
plot1 <- plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
vertex.color= fullData$search,
edge.arrow.size=.2, layout = coords)
# the layout functions for this are utter garbage
edges1 <- subset(edges, Freq > 1)
# coords = layout_(simpleNet, with_mds())
# plot2 <- plot(simpleNet, vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
# net1$search <- as.numeric(net1$search)
comStructure <- modularity(net, net$search)
# coords = layout_(simpleNet, with_mds())
# plot2 <- plot(simpleNet, vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
# net1$search <- as.numeric(net1$search)
comStructure <- modularity(net, search)
# coords = layout_(simpleNet, with_mds())
# plot2 <- plot(simpleNet, vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
# net1$search <- as.numeric(net1$search)
comStructure <- modularity(net, net[[search]])
# coords = layout_(simpleNet, with_mds())
# plot2 <- plot(simpleNet, vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
# net1$search <- as.numeric(net1$search)
comStructure <- modularity(net, net[search])
# coords = layout_(simpleNet, with_mds())
# plot2 <- plot(simpleNet, vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
# net1$search <- as.numeric(net1$search)
comStructure <- modularity(net)
# coords = layout_(simpleNet, with_mds())
# plot2 <- plot(simpleNet, vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
# net1$search <- as.numeric(net1$search)
comStructure <- modularity(net, net$search)
source("C:/docNonNetwork/RProjects/CT-MLNetworks/citationNetworks/Code/networkAnalysis.R")
# coords = layout_(simpleNet, with_mds())
# plot2 <- plot(simpleNet, vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
# net1$search <- as.numeric(net1$search)
comStructure <- modularity(net, net$search)
# coords = layout_(simpleNet, with_mds())
# plot2 <- plot(simpleNet, vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
# net1$search <- as.numeric(net1$search)
comStructure <- modularity(net, fullData$search)
comStructure# plot2 <- plot(delete.vertices(simplify(net1), degree(net)==0), vertex.size=2,
plot2 <- plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
vertex.color= fullData$color,
edge.arrow.size=.2, layout = coords)
cluster <- cluster_louvain(net)
cluster
memebers <- memebership(cluster)
memebers <- igraph::memebership(cluster)
memebers <- igraph::membership(cluster)
members <- igraph::membership(cluster)
members
plot(net, vertex.color=rainbow(3, alpha=0.6)[cluster$membership])
plot(net,
delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
edge.arrow.size=.2,
layout = coords,
vertex.color=rainbow(3, alpha=0.6)[cluster$membership])
plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
edge.arrow.size=.2,
layout = coords,
vertex.color=rainbow(3, alpha=0.6)[cluster$membership])
?degree
centrality <- degree(net, V(net$ID))
centrality <- degree(net, V(net))
centrality
plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
edge.arrow.size=.2,
layout = coords,
vertex.color=rainbow(3, alpha=0.6)[centrality])
# networkAnalysis.R
set.seed(1)
setwd("C:/docNonNetwork/RProjects/CT-MLNetworks/citationNetworks/Code")
# imports
library(igraph)
library(RColorBrewer)
# read in edgeList data
edges <- read.csv("../Data/edges/edgeList.csv")
# read data in
MLData <- read.csv("../Data/ML/autoScreenedML.csv")
CTData <- read.csv("../Data/CT/autoScreenedCT.csv")
MLData$search <- 2
CTData$search <- 1
MLData$label <- "ML"
CTData$label <- "CT"
MLData$color <- "gold"
CTData$color <- "blue"
fullData <- merge(MLData, CTData, all = T)
names(fullData)[names(fullData) == "X"] <- "ID"
colnames(fullData)
fullData$ID <- 1:nrow(fullData)
fullData$search <- as.numeric(fullData$search)
# fullData$search
# fullData$label
# fullData$color
# fullData$title
# fullDataOdered <- fullData[order(fullData$search),]
colnames(edges)
edges <- edges[c("CitingID", "CitedID")]
colnames(edges)
# edges <- as.data.frame(table(edges))
# edges <- subset(edges, Freq > 0)
# needs editing to refelect reality below here
nodes <- fullData[c("ID")] # slice of just ID and title
# currently this is an undirected shared reference network I think
# or at least it should be as those are the edges
#edges <- fullData[c("ID", "cited_by")]
titles <- fullData[c("ID", "title")]
authors <- fullData[c("ID", "author")]
journal <- fullData[c("ID", "source_title")]
year <- fullData[c("ID", "year")]
search <- fullData[c("ID", "search")]
label <- fullData[c("ID", "label")]
color <- fullData[c("ID", "color")]
references <- fullData[c("ID", "references")]
class(edges)
edges <- as.matrix(edges)
class(edges)
edges
net <- igraph::graph_from_edgelist(edges, directed = FALSE)
#net <- igraph::graph_from_data_frame(edges, directed = FALSE)
#plot(net)
net <- set_vertex_attr(net, "title", value = nodes)
#plot(net)
net <- set_vertex_attr(net, "author", value = authors)
net <- set_vertex_attr(net, "journal", value = journal)
net <- set_vertex_attr(net, "year", value = year)
net <- set_vertex_attr(net, "search", value = search)
layout <- layout.fruchterman.reingold(net)
plot(simplify(net),
layout=layout, vertex.size=2,
vertex.label=NA,
vertex.color= fullData$search,
edge.arrow.size=.2)
plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
vertex.color= fullData$search,
edge.arrow.size=.2)
coords = layout_(net, with_mds())
# coords = layout_(net, with_kk())
# png("../Results/Graphics/InitialPlot.png")
plot1 <- plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
vertex.color= fullData$search,
edge.arrow.size=.2, layout = coords)
plot2 <- plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
vertex.color= fullData$color,
edge.arrow.size=.2, layout = coords)
# the layout functions for this are utter garbage
# edges1 <- subset(edges, Freq > 1)
# net1 <- igraph::graph_from_data_frame(edges1, directed = FALSE)
# plot(net)
# net1 <- set_vertex_attr(net, "title", value = nodes)
#plot(net)
# net1 <- set_vertex_attr(net, "author", value = authors)
# net1 <- set_vertex_attr(net, "journal", value = journal)
# net1 <- set_vertex_attr(net, "year", value = year)
# net1 <- set_vertex_attr(net, "search", value = search)
# layout <- layout.fruchterman.reingold(net1)
# plot(simplify(net1),
#      layout=layout, vertex.size=2,
#      vertex.label=NA,
#      vertex.color= fullData$search,
#      edge.arrow.size=.2)
# plot(delete.vertices(simplify(net1), degree(net)==0), vertex.size=2,
#      vertex.label=NA,
#      vertex.color= fullData$search,
#      edge.arrow.size=.2)
# coords = layout_(net1, with_mds())
# coords = layout_(net, with_kk())
# png("../Results/Graphics/SecondPlot.png")
# simpleNet <- simplify(net1)
# simpleNet <- delete.vertices(simpleNet, degree(simpleNet)==0)
# coords = layout_(simpleNet, with_mds())
# plot2 <- plot(simpleNet, vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
# net1$search <- as.numeric(net1$search)
comStructure <- modularity(net, fullData$search)
comStructure
cluster <- cluster_louvain(net)
cluster
members <- igraph::membership(cluster)
members
# plot2 <- plot(delete.vertices(simplify(net1), degree(net)==0), vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
edge.arrow.size=.2,
layout = coords,
vertex.color=rainbow(3, alpha=0.6)[cluster$membership])
centrality <- degree(net, V(net))
centrality
plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
edge.arrow.size=.2,
layout = coords,
vertex.color=rainbow(3, alpha=0.6)[centrality])
source("C:/docNonNetwork/RProjects/CT-MLNetworks/citationNetworks/Code/networkAnalysis.R")
plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
edge.arrow.size=.2,
layout = coords,
vertex.color=rainbow(3, alpha=0.6)[cluster$membership])
centrality <- degree(net, V(net)$search)
centrality <- degree(net, V(net)$search)
centrality <- degree(net, V(net)$search)
ceb <- cluster_edge_betweenness(net)
assortativity_nominal(net, V(net)$search, directed=F)
assortativity(net, V(net)$search, directed=F)
class(V(net)$search)
?assortativity
V(net)$search
assortativity(net, V(net)$search, directed=F)
assortativity(net, as.numeric(as.factor(V(net)$search, directed=F)))
assortativity(net, as.numeric(as.factor(V(net)$search)), directed=F)
assortativity(net, as.numeric(as.factor(V(net)$search)), directed=F)
assortativity(net, fullData$search, directed=F)
assortativity_nominal(net, fullData$search, directed=F)
assortativity.degree(net, directed=F)
kc <- coreness(net, mode="all")
plot(net, vertex.size=kc*6, vertex.label=kc, vertex.color=colrs[kc])
cliques(net.sym) # list of cliques
# assortativity_nominal(net, V(net)$search, directed=F)
net.sym <- as.undirected(net, mode= "collapse",
edge.attr.comb=list(weight="sum", "ignore"))
cliques(net.sym) # list of cliques
clp <- cluster_label_prop(net)
plot(clp, net)
cfg <- cluster_fast_greedy(as.undirected(net))
colrs <- adjustcolor( c("gray50", "tomato", "gold", "yellowgreen"), alpha=.6)
plot(net, vertex.size=kc*6, vertex.label=kc, vertex.color=colrs[kc])
# how are we going to get proportion of ML refs cited out?
MLFull <- fullData %>% filter(search == 2)
# how are we going to get proportion of ML refs cited out?
MLFull <- fullData %>% filter(fullData$search == 2)
# how are we going to get proportion of ML refs cited out?
MLFull <- fullData %>% filter(fullData, fullData$search == 2)
# how are we going to get proportion of ML refs cited out?
MLFull <- filter(fullData, fullData$search == 2)
# how are we going to get proportion of ML refs cited out?
MLFull <- fullData %>% filter(fullData$label == 'ML')
# how are we going to get proportion of ML refs cited out?
MLFull <- fullData %>% dplyr::filter(fullData$label == 'ML')
View(MLFull)
?merge
# how are we going to get proportion of ML refs cited out?
names(fullData)[names(fullData) == "ID"] <- "CitingID"
dataPlusEdges <- merge(fullData, edges, all = T, by = 'CitingID')
View(dataPlusEdges)
# need to make a list of each cited ID by citingID
citationListsByNode <- unique(edges$CitingID)
# need to make a list of each cited ID by citingID
citationListsByNode <- unique(edges$CitingID)
# need to make a list of each cited ID by citingID
edges
# need to make a list of each cited ID by citingID
edgeDf <- as.data.frame(edges)
edgeDf <- edgeDf[order(CitingID),]
edgeDf <- edgeDf[order(edgeDf$CitingID),]
edgeDf
citationListsByNode <- edgeDf %>%
group_by(CitingID) %>%
summarise(CitedID = list(CitedID))
citationListsByNode <- edgeDf %>%
group_by(CitingID) %>%
dplyr::summarise(CitedID = list(CitedID))
citationListsByNode <- edgeDf %>%
dplyr::group_by(CitingID) %>%
dplyr::summarise(CitedID = list(CitedID))
citationListsByNode
class(citationListsByNode)
##
dataPlusEdges <- merge(fullData, citationListsByNode, all = T, by = 'CitingID')
View(dataPlusEdges)
MLFull <- dataPlusEdges %>% dplyr::filter(dataPlusEdges$label == 'ML')
CTFull <- dataPlusEdges %>% dplyr::filter(dataPlusEdges$label == 'CT')
View(MLFull)
plot2 <- plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
vertex.color= fullData$color,
edge.arrow.size=.2, layout = coords)
walkComm <- walktrap.community(net)
plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
edge.arrow.size=.2,
layout = coords,
vertex.color=rainbow(3, alpha=0.6)[walkComm])
plot(walkComm)
plot(net, walkComm)
centrality
comStructure
?modularity
comStructure
cluster <- cluster_louvain(net)
cluster
members <- igraph::membership(cluster)
members
class(members)
cluster <- cluster_louvain(net)
cluster
members <- igraph::membership(cluster)
class(members)
members
length(members)
length(unique(members))
table(members)
memberTable <- table(members)
hist(memberTable)
hist(memberTable, breaks = 500)
sort(memberTable)
# networkAnalysis.R
set.seed(1)
setwd("C:/docNonNetwork/RProjects/CT-MLNetworks/citationNetworks/Code")
# imports
library(igraph)
library(RColorBrewer)
# read in edgeList data
edges <- read.csv("../Data/edges/edgeList.csv")
# read data in
MLData <- read.csv("../Data/ML/autoScreenedML.csv")
CTData <- read.csv("../Data/CT/autoScreenedCT.csv")
MLData$search <- 2
CTData$search <- 1
MLData$label <- "ML"
CTData$label <- "CT"
MLData$color <- "gold"
CTData$color <- "blue"
fullData <- merge(MLData, CTData, all = T)
names(fullData)[names(fullData) == "X"] <- "ID"
colnames(fullData)
fullData$ID <- 1:nrow(fullData)
fullData$search <- as.numeric(fullData$search)
# fullData$search
# fullData$label
# fullData$color
# fullData$title
# fullDataOdered <- fullData[order(fullData$search),]
colnames(edges)
edges <- edges[c("CitingID", "CitedID")]
colnames(edges)
# edges <- as.data.frame(table(edges))
# edges <- subset(edges, Freq > 0)
# needs editing to refelect reality below here
nodes <- fullData[c("ID")] # slice of just ID and title
# currently this is an undirected shared reference network I think
# or at least it should be as those are the edges
#edges <- fullData[c("ID", "cited_by")]
titles <- fullData[c("ID", "title")]
authors <- fullData[c("ID", "author")]
journal <- fullData[c("ID", "source_title")]
year <- fullData[c("ID", "year")]
search <- fullData[c("ID", "search")]
label <- fullData[c("ID", "label")]
color <- fullData[c("ID", "color")]
references <- fullData[c("ID", "references")]
class(edges)
edges <- as.matrix(edges)
class(edges)
edges
net <- igraph::graph_from_edgelist(edges, directed = FALSE)
#net <- igraph::graph_from_data_frame(edges, directed = FALSE)
#plot(net)
net <- set_vertex_attr(net, "title", value = nodes)
#plot(net)
net <- set_vertex_attr(net, "author", value = authors)
net <- set_vertex_attr(net, "journal", value = journal)
net <- set_vertex_attr(net, "year", value = year)
net <- set_vertex_attr(net, "search", value = search)
layout <- layout.fruchterman.reingold(net)
plot(simplify(net),
layout=layout, vertex.size=2,
vertex.label=NA,
vertex.color= fullData$search,
edge.arrow.size=.2)
plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
vertex.color= fullData$search,
edge.arrow.size=.2)
coords = layout_(net, with_mds())
# coords = layout_(net, with_kk())
# png("../Results/Graphics/InitialPlot.png")
plot1 <- plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
vertex.color= fullData$search,
edge.arrow.size=.2, layout = coords)
plot2 <- plot(delete.vertices(simplify(net), degree(net)==0), vertex.size=2,
vertex.label=NA,
vertex.color= fullData$color,
edge.arrow.size=.2, layout = coords)
# the layout functions for this are utter garbage
# edges1 <- subset(edges, Freq > 1)
# net1 <- igraph::graph_from_data_frame(edges1, directed = FALSE)
# plot(net)
# net1 <- set_vertex_attr(net, "title", value = nodes)
#plot(net)
# net1 <- set_vertex_attr(net, "author", value = authors)
# net1 <- set_vertex_attr(net, "journal", value = journal)
# net1 <- set_vertex_attr(net, "year", value = year)
# net1 <- set_vertex_attr(net, "search", value = search)
# layout <- layout.fruchterman.reingold(net1)
# plot(simplify(net1),
#      layout=layout, vertex.size=2,
#      vertex.label=NA,
#      vertex.color= fullData$search,
#      edge.arrow.size=.2)
# plot(delete.vertices(simplify(net1), degree(net)==0), vertex.size=2,
#      vertex.label=NA,
#      vertex.color= fullData$search,
#      edge.arrow.size=.2)
# coords = layout_(net1, with_mds())
# coords = layout_(net, with_kk())
# png("../Results/Graphics/SecondPlot.png")
# simpleNet <- simplify(net1)
# simpleNet <- delete.vertices(simpleNet, degree(simpleNet)==0)
# coords = layout_(simpleNet, with_mds())
# plot2 <- plot(simpleNet, vertex.size=2,
#               vertex.label=NA,
#               vertex.color= fullData$search,
#               edge.arrow.size=.2, layout = coords)
# net1$search <- as.numeric(net1$search)
comStructure <- modularity(net, fullData$search)
comStructure
################ useful ###############
# what search did these appear in?
# proportion of the two searches in each module
cluster <- cluster_louvain(net)
cluster
members <- igraph::membership(cluster)
members
length(unique(members))
memberTable <- table(members)
hist(memberTable, breaks = 500)
sort(memberTable)
ceb <- cluster_edge_betweenness(net)
dendPlot(ceb, mode="hclust")
plot(ceb, net)
